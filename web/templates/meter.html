{{define "t_content"}}
{{$userIsAdmin := .Admin}}
{{$yes := .Messages.GetString "ckbox.true"}}
{{$no := .Messages.GetString "ckbox.false"}}

<!-- Your Block -->
<div class="block block-rounded">
    <div class="block-header block-header-default">
        <h3 class="block-title text-primary">{{.Messages.GetString "form.meter.list.header"}}</h3>
    </div>
    <div class="block-content block-content-full font-size-sm">
        <div class="float-right mb-2">
            <button type="button" class="btn btn-outline-primary gk-btn-new" data-toggle="modal"
                data-target="#meterEditModal">{{.Messages.GetString "form.meter.list.buttonnew"}}</button>
        </div>
        <div class="pb-3">&nbsp;</div>
    </div>
</div>
<div class="block block-rounded">
    <div class="block-content font-size-sm">
        <table class="table table-hover table-sm table-bordered table-striped gk-table js-dataTable-simple" id="meterTable">
            <thead>
                <tr>
                    <th scope="col" class="w-10">{{.Messages.GetString "form.meter.list.type"}}</th>
                    <th scope="col">{{.Messages.GetString "form.meter.list.znr"}}</th>
                    <th scope="col">{{.Messages.GetString "form.meter.list.desc"}}</th>
                    <th scope="col">{{.Messages.GetString "form.meter.list.building"}}</th>
                    <th scope="col" class="w-5">{{.Messages.GetString "form.all.label.actions"}}</th>
                </tr>
            </thead>
            <tbody>
                {{range .Entities}}
                <tr data-entityid="{{.ID}}">
                    <td data-gkvval="{{.Type.Val}}">{{.Type.Desc}}</td>
                    <td data-gkvval="{{.ZNR}}">{{.ZNR}}</td>
                    <td data-gkvval="{{.Desc}}">{{.Desc}}</td>
                    <td data-gkvval="{{.Building.ID}}">{{.Building.Short}}</td>
                    <td class="">
                        {{if $userIsAdmin}}
                        <div class="btn-group-sm">
                            <button type="button" class="btn btn-sm btn-alt-primary gk-btn-edit" data-toggle="modal"
                                data-target="#meterEditModal" >
                                <i class="fa fa-fw fa-pencil-alt"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-alt-primary gk-btn-delete" data-toggle="modal"
                                data-target="#confirmDeleteModal" >
                                <i class="fa fa-fw fa-times"></i>
                            </button>
                        </div>
                        {{else}}
                        <div class="d-none">
                            &nbsp;
                        </div>
                        {{end}}
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
</div>
<!-- END Your Block -->
<!-- Page Content -->
<!-- meter-edit -->

<script>
    //create GKEntityTable
    var myGKTable = new GKEntityTable("meter");
</script>

{{template "t_meter-edit" .}}
{{template "t_confirm-delete" .}}

{{end}}